var l=require("electron");var f=require("electron");function h(){window.addEventListener("keyup",e=>{(e.code==="F12"||e.code==="KeyI"&&(e.ctrlKey||e.altKey)&&e.shiftKey)&&f.ipcRenderer.send("ToggleDevTools")})}var y=require("electron");function m(){let e=process.env.ORIGINAL_DISCORD_PRELOAD;if(e){y.ipcRenderer.send("RegisterPreload",e);let r=process.kill;process.kill=()=>{};try{require(e)}catch(t){console.error(t)}process.kill=r}}var g=require("electron");function v(){function e(){let r="webpackChunkdiscord_app";function t(o,n,i){let c=o[n];Object.defineProperty(o,n,{get(){return c},set(s){Object.defineProperty(o,n,{value:s,configurable:!0,enumerable:!0,writable:!0});try{i(s)}catch(p){console.error(p)}return s},configurable:!0})}Reflect.has(window,r)||t(window,r,o=>{t(o,"push",()=>{o.push([[Symbol()],{},n=>{n.d=(i,c)=>{for(let s in c)!Reflect.has(c,s)||i[s]||Object.defineProperty(i,s,{get:()=>c[s](),set:p=>{c[s]=()=>p},enumerable:!0,configurable:!0})}}]),o.pop()})})}g.webFrame.top.executeJavaScript("("+e+")()")}var w=require("http"),d=null,O=null;function k(e){return new Promise((r,t)=>{let o="";e.on("data",n=>{o+=n}),e.on("end",()=>{try{r(JSON.parse(o))}catch(n){t(n)}})})}function P(e){let r={};for(let t=0;t<e.length;t+=2)r[e[t].toLowerCase()]=e[t+1];return r}var a={"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},T=w.createServer(async(e,r)=>{if(!d){r.writeHead(500,a),r.end(JSON.stringify({ok:!1,error:"HTTP Handler not set"}));return}if(e.headers=P(e.rawHeaders),e.headers["content-type"]=="application/json")try{e.body=await k(e)}catch(t){r.writeHead(400,a),r.end(JSON.stringify({ok:!1,error:t.message}));return}try{let t=await d({method:e.method,url:e.url,body:e.body||null,headers:e.headers});if(!t){r.writeHead(500,a),r.end(JSON.stringify({ok:!1,error:"HTTP Handler returned nothing."}));return}let{body:o,headers:n={},status:i=200}=t;n["Access-Control-Allow-Origin"]="*",r.writeHead(i,n),r.end(o)}catch(t){r.writeHead(500,a),r.end(JSON.stringify({ok:!1,error:t?.stack||t?.message||t||"Unknown error"}));return}});function b(e){try{T.listen(e,()=>{console.log(`HTTP Server listening on port ${e}`)}),O=e}catch(r){if(e>6170)return;console.log(`Unable to listen on port ${e}. Trying next port...`,r),b(e+1)}}b(6160);var u={setHandler(e){d||(d=e)},getPort(){return O}};l.contextBridge.exposeInMainWorld(process.env.ACORD_PRELOAD_KEY,{require,process:{cwd:process.cwd(),kill:process.kill,platform:process.platform,version:process.version,versions:process.versions,env:(()=>{let e=JSON.parse(JSON.stringify(process.env));return delete e.ACORD_PRELOAD_KEY,e})()},isDevToolsOpen(){return l.ipcRenderer.sendSync("IsDevToolsOpen")},ipcRenderer:l.ipcRenderer,http:{getPort:u.getPort,setHandler:u.setHandler}});v();h();m();setInterval(()=>{try{DiscordNative.processUtils.purgeMemory()}catch{}},6e4);
