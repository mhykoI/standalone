var E=Object.create;var w=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,z=Object.prototype.hasOwnProperty;var L=(e,o,n,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let t of I(o))!z.call(e,t)&&t!==n&&w(e,t,{get:()=>o[t],enumerable:!(s=H(o,t))||s.enumerable});return e};var c=(e,o,n)=>(n=e!=null?E(k(e)):{},L(o||!e||!e.__esModule?w(n,"default",{value:e,enumerable:!0}):n,e));var y=require("electron");var h=c(require("electron"));function g(){let e=["content-security-policy","access-control-allow-origin"],o=["googlevideo.com","captcha"];h.default.session.defaultSession.webRequest.onHeadersReceived((n,s)=>{if(o.some(t=>n.url.includes(t)))return s({cancel:!1,responseHeaders:n.responseHeaders});Object.keys(n.responseHeaders).forEach(t=>{e.includes(t.toLowerCase())&&delete n.responseHeaders[t]}),n.responseHeaders["Access-Control-Allow-Origin"]=["*"],s({cancel:!1,responseHeaders:n.responseHeaders})})}var r=require("electron");function b(){r.ipcMain.on("GetPath",(e,o)=>{if(o==="appPath"){e.returnValue=r.app.getAppPath();return}try{e.returnValue=r.app.getPath(o)}catch{e.returnValue=null}}),r.ipcMain.on("Relaunch",()=>{r.app.quit(),r.app.relaunch()}),r.ipcMain.on("OpenDevTools",(e,o)=>{try{e.sender.openDevTools({mode:o,activate:!0})}catch{}}),r.ipcMain.on("CloseDevTools",e=>{try{e.sender.closeDevTools()}catch{}}),r.ipcMain.on("IsDevToolsOpen",e=>{e.returnValue=e.sender.isDevToolsOpened()}),r.ipcMain.on("ToggleDevTools",(e,o)=>{try{e.sender.isDevToolsOpened()?e.sender.closeDevTools():e.sender.openDevTools({mode:o,activate:!0})}catch{}}),r.ipcMain.on("QuitApp",()=>{r.app.quit(),setTimeout(()=>{process.exit(0)},100)}),r.ipcMain.on("HideWindow",(e,o)=>{r.BrowserWindow.fromWebContents(e.sender).hide()}),r.ipcMain.on("MinimizeWindow",(e,o)=>{r.BrowserWindow.fromWebContents(e.sender).minimize()}),r.ipcMain.on("MaximizeWindow",(e,o)=>{r.BrowserWindow.fromWebContents(e.sender).maximize()}),r.ipcMain.on("ToggleMaximizeWindow",(e,o)=>{let n=r.BrowserWindow.fromWebContents(e.sender);n.isMaximized()?n.unmaximize():n.maximize()}),r.ipcMain.on("ToggleMinimizeWindow",(e,o)=>{let n=r.BrowserWindow.fromWebContents(e.sender);n.isMinimized()?n.restore():n.minimize()}),r.ipcMain.on("RegisterPreload",(e,o)=>{try{r.app.commandLine.appendSwitch("preload",o)}catch{}}),r.ipcMain.handle("ExecuteWindowScript",async(e,o)=>{try{return{ok:!0,data:await e.sender.executeJavaScript(`(() => {try {${o}} catch {}})();`,!0)}}catch(n){return{ok:!1,error:`${n}`}}}),r.ipcMain.handle("ExecuteInjectorScript",async(event,arg)=>{try{let res=await eval(`(() => {try {${arg}} catch {}})();`);return{ok:!0,data:res}}catch(e){return{ok:!1,error:`${e}`}}}),r.ipcMain.handle("ShowDialog",async(e,{mode:o="open",openDirectory:n=!1,openFile:s=!0,multiSelections:t=!1,filters:i,promptToCreate:l=!1,defaultPath:a,title:x,showOverwriteConfirmation:C,message:O,showHiddenFiles:W,modal:T=!1,buttons:_,defaultId:S,type:R,cancelId:A}={})=>{let f={open:r.dialog.showOpenDialog,save:r.dialog.showSaveDialog,message:r.dialog.showMessageBox}[o];return f?{ok:!1,data:await f.apply(r.dialog,[T&&r.BrowserWindow.fromWebContents(e.sender),{defaultPath:a,filters:i,title:x,message:O,createDirectory:!0,buttons:_,type:R,defaultId:S,cancelId:A,properties:[W&&"showHiddenFiles",n&&"openDirectory",l&&"promptToCreate",n&&"openDirectory",s&&"openFile",t&&"multiSelections",C&&"showOverwriteConfirmation"].filter(p=>p)}].filter(p=>p))}:{error:"Invalid mode.",ok:!1}}),r.ipcMain.handle("ShowWindow",(e,{url:o="",options:n=null,closeOnUrl:s=""}={})=>new Promise(t=>{let i=new r.BrowserWindow(n);if(i.loadURL(o),i.webContents.on("did-navigate",(l,a)=>{a==s&&(windowInstance.close(),t(i.id))}),!s)return t(i.id)})),r.ipcMain.on("OpenExternal",(e,o)=>{r.shell.openExternal(o)})}var v=c(require("electron"));function D(){v.default.session.fromPartition("default").setPermissionRequestHandler((e,o,n)=>{n(!0)})}var d=c(require("electron")),m=c(require("path")),u=c(require("fs"));function P(){let e=!1;class o extends d.default.BrowserWindow{constructor(t){if(e||!t||!t.webPreferences||!t.webPreferences.preload||!t.title)return super(t);let i=t.webPreferences.preload;t.webPreferences.preload=m.default.join(__dirname,"preload.js"),t.webPreferences.backgroundThrottling=!1,super(t),this.__ORIGINAL_PRELOAD__=i,process.env.ORIGINAL_DISCORD_PRELOAD=i,process.env.ACORD_PRELOAD_KEY=Array(2).fill(0).map(()=>Math.random().toString(36).slice(2)).join("").replace(/^\d+/,""),this.webContents.on("dom-ready",async()=>{let l=m.default.join(__dirname,"renderer.js");if(!u.default.existsSync(l))return;let a=u.default.readFileSync(l,"utf-8");a=a.replace(/<<PRELOAD_KEY>>/gm,process.env.ACORD_PRELOAD_KEY),this.webContents.executeJavaScript(a,!0)}),this.webContents.on("did-navigate-in-page",()=>{this.webContents.send("NavigateInPage")}),this.setMinimumSize(1,1)}}Object.assign(o,d.default.BrowserWindow);let n=require.resolve("electron");delete require.cache[n].exports,require.cache[n].exports={...d.default,BrowserWindow:o}}process.argv.includes("--original")||(process.env.NODE_OPTIONS="--no-force-async-hooks-checks",y.app.commandLine.appendSwitch("no-force-async-hooks-checks"),P(),D(),g(),b());
